@model PEMinutes.ViewModels.SubstituteViewModel

@{
	ViewBag.Title = "Substitute PE Minutes";   
}

<!--   Big container   -->
<div class="container">
	<div class="row">
		<div class="col-sm-8 col-sm-offset-2">
			<!--      Wizard container        -->
			<div class="wizard-container">
				<div class="card wizard-card" data-color="blue" id="wizard">
					<form action="" method="">
						<!--        You can switch " data-color="azure" "  with one of the next bright colors: "blue", "green", "orange", "red"           -->
						<div class="wizard-header">
							<h3 class="wizard-title">Substitute Minutes</h3>
							<p class="category">These minutes will be reviewed upon the teachers return.</p>
						</div>
						<div class="wizard-navigation">
							<div class="progress-with-circle">
								<div class="progress-bar" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="3" style="width: 21%;"></div>
							</div>
							<ul>
								<li>
									<a href="#details" data-toggle="tab">
										<div class="icon-circle">
											<i class="ti-home"></i>
										</div>
										School
									</a>
								</li>
								<li>
									<a href="#captain" data-toggle="tab">
										<div class="icon-circle">
											<i class="ti-user"></i>
										</div>
										Teacher
									</a>
								</li>
								<li>
									<a href="#description" data-toggle="tab">
										<div class="icon-circle">
											<i class="ti-pencil"></i>
										</div>
										Details
									</a>
								</li>
							</ul>
						</div>
						<div class="tab-content">
							<div class="tab-pane" id="details">
								<div class="row">
									<div class="col-sm-12">
										<h5 class="info-text"> Where are you?</h5>
									</div>
									<div class="col-sm-10 col-sm-offset-1">
										<div class="form-group">
											<select id="SelectASchool" class="form-control">
												<option value=""></option>
												@foreach (var item in Model.SchoolList)
												{
													<option value="@item.SchoolName">@item.SchoolName</option>
												}
											</select>
										</div>
									</div>

								</div>
							</div>
							<div class="tab-pane" id="captain">
								<h5 class="info-text">Who are you substituting for? </h5>
								<div class="row">
									<div class="col-sm-10 col-sm-offset-1">
                                            <div id="teacherselect">
                                            </div>

									</div>
								</div>
							</div>
							<div class="tab-pane" id="description">
                                <div class="row">
                                    <div class="col-sm-10 col-sm-offset-1">
                                        <div id="detailsResults">
                                        </div>

                                    </div>
                                </div>
							</div>
						</div>
						<div class="wizard-footer">
							<div class="pull-right">
								<input type='button' class='btn btn-next btn-fill btn-primary btn-wd' name='next' value='Next' />
							</div>
							<div class="pull-left">
								<input type='button' class='btn btn-previous btn-default btn-wd' name='previous' value='Previous' />
							</div>
							<div class="clearfix"></div>
						</div>
					</form>
				</div>
			</div> <!-- wizard container -->
		</div>
	</div> <!-- row -->
</div> <!--  big container -->

@*<div class="container">
			<div class="content">
				<div class="col-sm-12 card" style="margin-top: 40px; padding-bottom: 20px;">
					<div class="header">
						<h4 class="title">Location</h4>
						<p class="category">Let's start with some basic information</p>
					</div>
					<div class="content">
						<div class="col-lg-4 col-md-4 col-sm-12">

							<select id="SelectASchool" class="form-control">
								<option value="">Where are you?</option>
								@foreach (var item in Model.SchoolList)
								{
									<option value="@item.SchoolName">@item.SchoolName</option>
								}
							</select>
						</div>
						<div class="col-lg-4 col-md-4 col-sm-12">
							<div id="teacherselect">
							</div>
						</div>
						<div class="row">
							<p class="errormessage"></p>
						</div>
					</div>
				</div>
				<div>
					@Html.ActionLink("Back", "Index", new { Controller = "Authentication", action = "Index" }, new { @class = "btn" })
				</div>
			</div>
		</div>*@




	@section Scripts{

		<script>
			// When you select a school from the dropdown list this function will get a list of teachers from that school
			$("#SelectASchool").on('change', function () {
				var SelectedSchool = $(this).val();
				if (SelectedSchool === "notaschool") {

				} else {
					$("#fademin").fadeIn('fast');
					$.ajax({
						type: 'Get',
						url: '@Url.Action("_GetTeachers","Substitute")',
						data: { SelectedSchool: SelectedSchool },
						success: function (data) {
							$("#teacherselect").html(data);
						},
						error: function (data) {
							$(".errormessage").text('There was an error processing your request.');
						}
					});
				}
			});

            $("#teacherselect").on('change', function () {
                var badge = $("#MyTeachers").val();
                    $.ajax({
                        type: 'Get',
                        url: '@Url.Action("_identifyStaff","Substitute")',
                        data: { selectedbadge: badge },
                        success: function (data) {
                            $("#detailsResults").html(data);
                        },
                        error: function (data) {
                            $(".errormessage").text('There was an error processing your request.');
                        }
                    });
            });

			// When you select a teacher name this function will take you to the create page and pass in the badge number
			@*function LoadSubMinutesCreate(element) {
				var badge = $(element).val();
				$.ajax({
					type: 'Get',
					url: '@Url.Action("Create", "Substitute")',
					data: { selectedbadge: badge },
					beforeSend: function () {

					},
					success: function (data) {
						var url = '/Substitute/_create?selectedbadge=' + badge;
						window.location.href = url;
					},
					error: function (data) {
						$(".errormessage").text('There was an error processing your request.');
					}
				});
			};*@
		</script>

	}
